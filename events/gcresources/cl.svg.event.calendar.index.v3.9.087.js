var Hashtable=function(){function e(t){var i;if(typeof t=="string")return t;if(typeof t.hashCode==n)return i=t.hashCode(),typeof i=="string"?i:e(i);if(typeof t.toString==n)return t.toString();try{return String(t)}catch(r){return Object.prototype.toString.call(t)}}function y(n,t){return n.equals(t)}function p(t,i){return typeof i.equals==n?i.equals(t):t===i}function o(n){return function(t){if(t===null)throw new Error("null is not a valid "+n);else if(typeof t=="undefined")throw new Error(n+" must not be undefined");}}function r(n,t,i,r){this[0]=n;this.entries=[];this.addEntry(t,i);r!==null&&(this.getEqualityFunction=function(){return r})}function u(n){return function(t){for(var r=this.entries.length,i,u=this.getEqualityFunction(t);r--;)if(i=this.entries[r],u(t,i[0]))switch(n){case h:return!0;case c:return i;case l:return[r,i[1]]}return!1}}function a(n){return function(t){for(var r=t.length,i=0,u=this.entries.length;i<u;++i)t[r+i]=this.entries[i][n]}}function w(n,t){for(var i=n.length,r;i--;)if(r=n[i],t===r[0])return i;return null}function i(n,t){var i=n[t];return i&&i instanceof r?i:null}function v(u,o){var l=this,h=[],c={},a=typeof u==n?u:e,p=typeof o==n?o:null,y;this.put=function(n,u){t(n);s(u);var o=a(n),f,e,l=null;return f=i(c,o),f?(e=f.getEntryForKey(n),e?(l=e[1],e[1]=u):f.addEntry(n,u)):(f=new r(o,n,u,p),h[h.length]=f,c[o]=f),l};this.get=function(n){var f,r,u;return(t(n),f=a(n),r=i(c,f),r&&(u=r.getEntryForKey(n),u))?u[1]:null};this.containsKey=function(n){t(n);var u=a(n),r=i(c,u);return r?r.containsKey(n):!1};this.containsValue=function(n){s(n);for(var t=h.length;t--;)if(h[t].containsValue(n))return!0;return!1};this.clear=function(){h.length=0;c={}};this.isEmpty=function(){return!h.length};y=function(n){return function(){for(var t=[],i=h.length;i--;)h[i][n](t);return t}};this.keys=y("keys");this.values=y("values");this.entries=y("getEntries");this.remove=function(n){t(n);var r=a(n),o,u=null,e=i(c,r);return e&&(u=e.removeEntryForKey(n),u!==null&&(e.entries.length||(o=w(h,r),f(h,o),delete c[r]))),u};this.size=function(){for(var n=0,t=h.length;t--;)n+=h[t].entries.length;return n};this.each=function(n){for(var i=l.entries(),r=i.length,t;r--;)t=i[r],n(t[0],t[1])};this.putAll=function(t,i){for(var e=t.entries(),f,r,u,o,s=e.length,h=typeof i==n;s--;)f=e[s],r=f[0],u=f[1],h&&(o=l.get(r))&&(u=i(r,o,u)),l.put(r,u)};this.clone=function(){var n=new v(u,o);return n.putAll(l),n}}var n="function",f=typeof Array.prototype.splice==n?function(n,t){n.splice(t,1)}:function(n,t){var r,i,u;if(t===n.length-1)n.length=t;else for(r=n.slice(t+1),n.length=t,i=0,u=r.length;i<u;++i)n[t+i]=r[i]},t=o("key"),s=o("value"),h=0,c=1,l=2;return r.prototype={getEqualityFunction:function(t){return typeof t.equals==n?y:p},getEntryForKey:u(c),getEntryAndIndexForKey:u(l),removeEntryForKey:function(n){var t=this.getEntryAndIndexForKey(n);return t?(f(this.entries,t[0]),t[1]):null},addEntry:function(n,t){this.entries[this.entries.length]=[n,t]},keys:a(0),values:a(1),getEntries:function(n){for(var i=n.length,t=0,r=this.entries.length;t<r;++t)n[i+t]=this.entries[t].slice(0)},containsKey:u(h),containsValue:function(n){for(var t=this.entries.length;t--;)if(n===this.entries[t][1])return!0;return!1}},v}(),EventCalendar,EventDirectory;(function(n){function s(n,t,i,r,u){this.id=0;this.titleValue=n;this.startDt=t;this.endDt=i;this.allDayEvent=r;this.backgroundColor=null;this.foregroundColor=null;this.agendaData=u;this.isAllDay=function(){return this.allDayEvent};this.setAllDay=function(n){this.allDayEvent=n};this.setBackgroundColor=function(n){this.backgroundColor=n};this.setForegroundColor=function(n){this.foregroundColor=n};this.getBackgroundColor=function(){return this.backgroundColor};this.getForegroundColor=function(){return this.foregroundColor};this.setAgendaId=function(n){this.id=n};this.getAgendaId=function(){return this.id};this.getStartDate=function(){return this.startDt};this.getEndDate=function(){return this.endDt};this.setStartDate=function(n){this.startDt=n};this.setEndDate=function(n){this.endDt=n};this.getTitle=function(){return this.titleValue};this.addAgendaData=function(n,t){this.agendaData.put(n,t)};this.getAgendaData=function(n){return this.agendaData.get(n)};this.getAgendaDataHash=function(){return this.agendaData};this.toString=function(){var n="Title: "+this.titleValue+"\n",i,t,r,u;if(n+="Start Date: "+this.startDt+"\n",n+="End Date: "+this.endDt+"\n",this.agendaData!=null&&this.agendaData.size()>0)for(i=this.agendaData.keys(),t=0;t<i.length;t++)r=i[t],u=this.getAgendaData(r),n+=r+": "+u+"\n";return n}}function c(n){this.jqyObj=n;this.date=null;this.agendaDivArray=[];this.jqyMoreDiv=null;this.addClass=function(n){this.jqyObj.addClass(n)};this.removeClass=function(n){n!=null&&n!=""?this.jqyObj.removeClass(n):this.jqyObj.removeClass()};this.addMoreDiv=function(n){this.jqyMoreDiv==null?(this.jqyMoreDiv=n,this.appendHtml(n)):(this.jqyMoreDiv.remove(),this.jqyMoreDiv=n,this.appendHtml(n))};this.hasMoreDiv=function(){return this.jqyMoreDiv!=null?!0:!1};this.addAgendaDivElement=function(n,t){this.agendaDivArray.push(t)};this.clearAgendaDivElements=function(){this.clearHtml();this.jqyMoreDiv=null;this.agendaDivArray=[]};this.getNextAgendaYstartY=function(n,t,i){var u=n,r=this.agendaDivArray,s=this.getY()+this.getHeight()-(t+1)-(i+1),e,o,f;if(r!=null&&r.length>0)for(r.sort(this.sortDivByY),e=0,o=0,f=0;f<r.length;f++)e=parseInt(r[f].css("top").replace("px","")),o=e+parseInt(r[f].css("height").replace("px",""))+1,e+2-u>t+1||o<u||(u=o);return u>s?-1:parseInt(u)};this.sortDivByY=function(n,t){var i=parseInt(n.css("top").replace("px","")),r=parseInt(t.css("top").replace("px",""));return i<r?-1:i>r?1:0};this.setDate=function(n){this.date=n};this.getDate=function(){return this.date};this.getHeight=function(){return this.jqyObj.height()};this.setHeight=function(n){this.jqyObj.height(n)};this.getWidth=function(){return this.jqyObj.width()};this.setWidth=function(n){this.jqyObj.width(n)};this.getInnerWidth=function(){return this.jqyObj.innerWidth()};this.getInnerWidthPlusBorder=function(){return this.jqyObj.outerWidth()};this.getX=function(){return this.jqyObj.position().left};this.getY=function(){return this.jqyObj.position().top};this.setHtml=function(n){this.jqyObj.html(n)};this.appendHtml=function(n){this.jqyObj.append(n)};this.clearHtml=function(){this.setHtml("")};this.getHtml=function(){return this.jqyObj.html()};this.setCss=function(n,t){this.jqyObj.css(n,t)};this.getCss=function(n){return this.jqyObj.css(n)};this.setAttr=function(n,t){this.jqyObj.attr(n,t)};this.getAttr=function(n){return this.jqyObj.attr(n)};this.addClickHandler=function(n){this.jqyObj.bind("click",{calDayDate:this.date},n)}}function a(n){this.jqyObj=n;this.addClass=function(n){this.jqyObj.addClass(n)};this.setHtml=function(n){this.jqyObj.html(n)};this.getHtml=function(){return this.jqyObj.html()};this.setCss=function(n,t){this.jqyObj.css(n,t)};this.getCss=function(n){return this.jqyObj.css(n)};this.setAttr=function(n,t){this.jqyObj.attr(n,t)};this.getAttr=function(n){return this.jqyObj.attr(n)};this.getX=function(){return this.jqyObj.position().left};this.getY=function(){return this.jqyObj.position().top};this.getHeight=function(){return this.jqyObj.height()};this.setHeight=function(n){this.jqyObj.height(n)};this.getWidth=function(){return this.jqyObj.width()};this.setWidth=function(n){this.jqyObj.width(n)};this.getInnerWidth=function(){return this.jqyObj.innerWidth()};this.getInnerWidthPlusBorder=function(){return this.jqyObj.outerWidth()}}function v(n){this.jqyObj=n;this.date=null;this.addClass=function(n){this.jqyObj.addClass(n)};this.setDate=function(n){this.date=n};this.getDate=function(){return this.date};this.setHtml=function(n){this.jqyObj.html(n)};this.getHtml=function(){return this.jqyObj.html()};this.setCss=function(n,t){this.jqyObj.css(n,t)};this.getCss=function(n){return this.jqyObj.css(n)};this.setAttr=function(n,t){this.jqyObj.attr(n,t)};this.getAttr=function(n){return this.jqyObj.attr(n)};this.getX=function(){return this.jqyObj.position().left};this.getY=function(){return this.jqyObj.position().top};this.getHeight=function(){return this.jqyObj.height()};this.setHeight=function(n){this.jqyObj.height(n)};this.getWidth=function(){return this.jqyObj.width()};this.setWidth=function(n){this.jqyObj.width(n)};this.getInnerWidth=function(){return this.jqyObj.innerWidth()};this.getInnerWidthPlusBorder=function(){return this.jqyObj.outerWidth()};this.addClickHandler=function(n){this.jqyObj.bind("click",{calDayDate:this.date},n)}}function y(n){this.jqyObj=n;this.headerCells=[];this.appendCalendarHeaderCell=function(n){this.headerCells.push(n);this.jqyObj.append(n.jqyObj)};this.getHeaderCells=function(){return this.headerCells};this.setHtml=function(n){this.jqyObj.html(n)};this.getHtml=function(){return this.jqyObj.html()};this.setCss=function(n,t){this.jqyObj.css(n,t)};this.getCss=function(n){return this.jqyObj.css(n)};this.setAttr=function(n,t){this.jqyObj.attr(n,t)};this.getAttr=function(n){return this.jqyObj.attr(n)};this.setWidth=function(n){this.jqyObj.width(n)}}function p(n){this.jqyObj=n;this.weekHeaderCells=[];this.appendCalendarWeekHeaderCell=function(n){this.weekHeaderCells.push(n);this.jqyObj.append(n.jqyObj)};this.getHeaderCells=function(){return this.weekHeaderCells};this.setHtml=function(n){this.jqyObj.html(n)};this.getHtml=function(){return this.jqyObj.html()};this.setCss=function(n,t){this.jqyObj.css(n,t)};this.getCss=function(n){return this.jqyObj.css(n)};this.setAttr=function(n,t){this.jqyObj.attr(n,t)};this.getAttr=function(n){return this.jqyObj.attr(n)};this.setWidth=function(n){this.jqyObj.width(n)}}function w(n){this.jqyObj=n;this.days=[];this.appendCalendarDayCell=function(n){this.days.push(n);this.jqyObj.append(n.jqyObj)};this.getDays=function(){return this.days};this.setHtml=function(n){this.jqyObj.html(n)};this.getHtml=function(){return this.jqyObj.html()};this.setCss=function(n,t){this.jqyObj.css(n,t)};this.getCss=function(n){return this.jqyObj.css(n)};this.setAttr=function(n,t){this.jqyObj.attr(n,t)};this.getAttr=function(n){return this.jqyObj.attr(n)};this.setWidth=function(n){this.jqyObj.width(n)}}function r(){this.jqyObj=null;this.calHeaderObj=null;this.weeks=[];this.weekHeaders=[];this.displayDate=new Date;this.agendaItems=new Hashtable;this.dragAndDropEnabled=!0;this.dayHash=new Hashtable;this.clickEvent_dayCell=null;this.clickEvent_agendaCell=null;this.dropEvent_agendaCell=null;this.mouseOverEvent_agendaCell=null;this.callBack_agendaTooltip=null;this.dragStart_agendaCell=null;this.dragStop_agendaCell=null;this.agendaId=1;this.cellBorderWidth=1;this.dayCellHeaderCellHeight=17;this.agendaItemHeight=15;this.aspectRatio=1;this.initialize=function(n,t,i,r,u,f,e,o,s,h){this.jqyObj=n;this.displayDate=t;this.clickEvent_dayCell=i;this.clickEvent_agendaCell=r;this.dropEvent_agendaCell=u;this.dragAndDropEnabled=f;this.mouseOverEvent_agendaCell=e;this.callBack_agendaTooltip=o;this.dragStart_agendaCell=s;this.dragStop_agendaCell=h;this.do_init()};this.do_init=function(){var c,v,d,a,i;for(this.clear(!1),v=this.buildCalendarHeader(),i=0;i<r.dayNames.length;i++)c=this.buildCalendarHeaderCell(),c.setHtml("&nbsp;"+r.dayNames[i]),v.appendCalendarHeaderCell(c),i==6&&c.addClass("JFrontierCal-Header-Cell-Last");this.addHeader(v);var y=new Date,s=this.getCurrentYear(),h=this.getCurrentMonth(),p=y.getDate(),l=this.getDaysCurrentMonth(),it=this.getDaysPreviousMonth(),ht=this.getDaysNextMonth(),rt=new Date(this.getCurrentYear(),this.getCurrentMonth(),1,0,0,0,0),ut=new Date(this.getCurrentYear(),this.getCurrentMonth(),l,0,0,0,0),w=rt.getDay(),g=ut.getDay(),b=y.getFullYear()==s&&y.getMonth()==h?!0:!1,nt=l+w;g>0&&(nt+=r.dayNames.length-g-1);var tt=Math.ceil(nt/r.dayNames.length),u=1,f=null,k=it-w+1,n,e,t,o;for(e=this.buildCalendarWeek(),o=this.buildCalendarWeekHeader(),i=0;i<r.dayNames.length;i++)n=this.buildCalendarDayCell(),t=this.buildCalendarWeekHeaderCell(),i<w?(f=new Date(s,h-1,k,0,0,0,0),n.setDate(f),t.setDate(f),t.setHtml(k+"&nbsp;"),n.addClass("JFrontierCal-PrevMonth-Day-Cell"),t.addClass("JFrontierCal-PrevMonth-Week-Header-Cell"),k+=1):(f=new Date(s,h,u,0,0,0,0),n.setDate(f),t.setDate(f),t.setHtml(u+"&nbsp;"),b&&u==p&&(n.addClass("JFrontierCal-Day-Cell-Today"),t.setHtml(u+"&nbsp;")),u+=1),i==6&&(n.addClass("JFrontierCal-Day-Cell-Last"),t.addClass("JFrontierCal-Week-Header-Cell-Last")),this.clickEvent_dayCell!=null&&(n.addClickHandler(this.clickEvent_dayCell),t.addClickHandler(this.clickEvent_dayCell)),n.jqyObj.data("dayDate",f),this.dragAndDropEnabled&&(n.jqyObj.droppable({hoverClass:"JFrontierCal-Day-Cell-Droppable",tolerance:"pointer",accept:".JFrontierCal-Agenda-Item"}),n.jqyObj.bind("drop",{cal:this},this.agendaDropHandler)),o.appendCalendarWeekHeaderCell(t),e.appendCalendarDayCell(n),this.dayHash.put(n.getDate().getFullYear()+""+(n.getDate().getMonth()+"")+(n.getDate().getDate()+""),n);for(this.addWeekHeader(o),this.addWeek(e),d=2;d<tt;d++){for(e=this.buildCalendarWeek(),o=this.buildCalendarWeekHeader(),i=0;i<r.dayNames.length;i++)n=this.buildCalendarDayCell(),t=this.buildCalendarWeekHeaderCell(),f=new Date(s,h,u,0,0,0,0),n.setDate(f),t.setDate(f),t.setHtml(u+"&nbsp;"),this.clickEvent_dayCell!=null&&(n.addClickHandler(this.clickEvent_dayCell),t.addClickHandler(this.clickEvent_dayCell)),n.jqyObj.data("dayDate",f),this.dragAndDropEnabled&&(n.jqyObj.droppable({hoverClass:"JFrontierCal-Day-Cell-Droppable",tolerance:"pointer",accept:".JFrontierCal-Agenda-Item"}),n.jqyObj.bind("drop",{cal:this},this.agendaDropHandler)),i==6&&(n.addClass("JFrontierCal-Day-Cell-Last"),t.addClass("JFrontierCal-Week-Header-Cell-Last")),b&&u==p&&(n.addClass("JFrontierCal-Day-Cell-Today"),t.setHtml(u+"&nbsp;")),o.appendCalendarWeekHeaderCell(t),e.appendCalendarDayCell(n),this.dayHash.put(n.getDate().getFullYear()+""+(n.getDate().getMonth()+"")+(n.getDate().getDate()+""),n),u+=1;this.addWeekHeader(o);this.addWeek(e)}for(a=1,e=this.buildCalendarWeek(),o=this.buildCalendarWeekHeader(),i=0;i<r.dayNames.length;i++)n=this.buildCalendarDayCell(),t=this.buildCalendarWeekHeaderCell(),u<=l?(f=new Date(s,h,u,0,0,0,0),n.setDate(f),t.setDate(f),t.setHtml(u+"&nbsp;")):(f=new Date(s,h+1,a,0,0,0,0),n.setDate(f),t.setDate(f),t.setHtml(a+"&nbsp;"),n.addClass("JFrontierCal-NextMonth-Day-Cell"),t.addClass("JFrontierCal-NextMonth-Week-Header-Cell"),a+=1),i==6&&u<=l?(n.addClass("JFrontierCal-Day-Cell-Last"),t.addClass("JFrontierCal-Week-Header-Cell-Last")):i==6&&u>l&&(n.addClass("JFrontierCal-NextMonth-Day-Cell-Last"),t.addClass("JFrontierCal-NextMonth-Week-Header-Cell-Last")),b&&u==p&&(n.addClass("JFrontierCal-Day-Cell-Today"),t.setHtml(u+"&nbsp;")),u+=1,this.clickEvent_dayCell!=null&&(n.addClickHandler(this.clickEvent_dayCell),t.addClickHandler(this.clickEvent_dayCell)),n.jqyObj.data("dayDate",f),this.dragAndDropEnabled&&(n.jqyObj.droppable({hoverClass:"JFrontierCal-Day-Cell-Droppable",tolerance:"pointer",accept:".JFrontierCal-Agenda-Item"}),n.jqyObj.bind("drop",{cal:this},this.agendaDropHandler)),o.appendCalendarWeekHeaderCell(t),e.appendCalendarDayCell(n),this.dayHash.put(n.getDate().getFullYear()+""+(n.getDate().getMonth()+"")+(n.getDate().getDate()+""),n);this.addWeekHeader(o);this.addWeek(e);var ft=parseInt(c.jqyObj.outerHeight(!0)),et=parseInt(n.jqyObj.outerHeight(!0)*tt),ot=parseInt(t.jqyObj.outerHeight(!0)),st=et+ft+ot;this.setCss("height",st+"px");this.jqyObj.addClass("JFrontierCal");this.renderAgendaItems()};this.getAgendaItemsForDay=function(n){var i,r;if(this.agendaItems!=null&&this.agendaItems.size()!=0){var o=this.agendaItems.values(),u=null,f=null,e=[];for(i=0;i<this.agendaItems.size();i++)r=o[i],u=r.getStartDate(),f=r.getEndDate(),t.isDateBetween(n,u,f)&&e.push(r);return e}};this.renderAgendaItems=function(){var t,n,i;if(this.agendaItems!=null&&this.agendaItems.size()!=0)for(t=this.agendaItems.values(),t.sort(r.sortAgendaItemsByStartDate),n=0;n<this.agendaItems.size();n++)i=t[n],this.renderSingleAgendaItem(i)};this.renderSingleAgendaItem=function(n){var tt=new Date,p,w,b,v,l,a,r,i,k,it,e,y,d,g,nt;if((o.log("Calendar.renderSingleAgendaItem() called."),n!=null)&&this.weeks!=null&&this.weeks.length!=0){var h,c,s=null,rt=n.getAgendaId(),u=n.getStartDate(),f=n.getEndDate();if(u!=null&&f!=null&&(p=null,w=this.weeks[0].getDays(),w!=null&&w.length>0&&(p=w[0]),b=null,v=this.weeks[this.weeks.length-1].getDays(),v!=null&&v.length>0&&(b=v[v.length-1]),p!=null&&b!=null)&&(l=p.getDate(),a=b.getDate(),!(t.daysDifferenceDirection(l,f)<0))&&!(t.daysDifferenceDirection(a,u)>0)){if(r=null,i=null,r=t.daysDifferenceDirection(l,u)<0?l:t.daysDifferenceDirection(l,u)==0?l:u,i=t.daysDifferenceDirection(a,f)>0?a:t.daysDifferenceDirection(a,f)==0?a:f,k=r.getDay(),it=i.getDay(),t.daysDifference(r,i)+k>6)for(s=n.isAllDay()?n.getTitle():t.getAgendaDisplayTime(n.getStartDate())+" "+n.getTitle(),e=t.getLastDayInSameWeek(r),c=t.daysDifferenceDirection(u,r)==0?!0:!1,h=t.daysDifferenceDirection(f,e)==0?!0:!1,this.renderAgendaDivElement(n,s,this.getCalendarDayObjByDate(r),this.getCalendarDayObjByDate(e),c,h),s=n.getTitle();t.daysDifferenceDirection(i,e)<0;)y=t.getFirstDayNextWeek(e),e=t.getLastDayInSameWeek(y),t.daysDifferenceDirection(i,e)<0?this.renderAgendaDivElement(n,s,this.getCalendarDayObjByDate(y),this.getCalendarDayObjByDate(e),!1,!1):(c=t.daysDifferenceDirection(u,y)==0?!0:!1,h=t.daysDifferenceDirection(f,i)==0?!0:!1,this.renderAgendaDivElement(n,s,this.getCalendarDayObjByDate(y),this.getCalendarDayObjByDate(i),c,h));else d=this.getCalendarDayObjByDate(r),g=this.getCalendarDayObjByDate(i),s=n.isAllDay()?n.getTitle():t.getAgendaDisplayTime(n.getStartDate())+" "+n.getTitle(),c=t.daysDifferenceDirection(u,r)==0?!0:!1,h=t.daysDifferenceDirection(f,i)==0?!0:!1,this.renderAgendaDivElement(n,s,d,g,c,h);nt=new Date;o.log("Calendar.renderSingleAgendaItem() end. Elapsed time in ms = "+Math.abs(nt-tt))}}};this.renderAgendaDivElement=function(t,i,u,f,e,o){var s,c,h;if(i!=null&&u!=null&&f!=null){var l=u.getX()+1,p=f.getX()+f.getWidth()-1,w=p-l,a=this.agendaItemHeight,v=a,y=this.getNextAgendaYPosition(u,f,a,v);y>0?(s=n("<div/>"),s.data("agendaId",t.getAgendaId()),this.dragAndDropEnabled&&(s.bind("drag",function(){}),s.bind("dragstart",{agendaDivElement:s,agendaId:t.getAgendaId(),agendaItem:r.buildUserAgendaObject(t),callBack:this.dragStart_agendaCell},function(n){var t=n.data.callBack;t!=null&&t(n,n.data.agendaDivElement,n.data.agendaItem)}),s.bind("dragstop",{agendaDivElement:s,agendaId:t.getAgendaId(),agendaItem:r.buildUserAgendaObject(t),callBack:this.dragStop_agendaCell},function(n){var t=n.data.callBack;t!=null&&t(n,n.data.agendaDivElement,n.data.agendaItem)}),s.draggable("enable"),s.data("agendaDivElement",s),s.data("agendaId",t.getAgendaId()),s.data("agendaItem",r.buildUserAgendaObject(t)),s.data("revertCallBack",this.callBack_agendaTooltip),s.draggable({revert:function(){var t=n(this).data("revertCallBack"),i=n(this).data("agendaDivElement"),r=n(this).data("agendaItem");return t!=null&&t(i,r),!0},scroll:!0})),s.addClass("JFrontierCal-Agenda-Item"),t.getBackgroundColor()!=null&&s.css("background-color",t.getBackgroundColor()),t.getForegroundColor()!=null&&s.css("color",t.getForegroundColor()),s.css("position","absolute"),s.css("left",l+"px"),s.css("top",y+"px"),s.css("width",w+"px"),s.css("white-space","nowrap"),e?(s.css("-moz-border-radius-bottomleft","3px"),s.css("-moz-border-radius-topleft","3px"),s.css("-webkit-border-bottom-left-radius","3px"),s.css("-webkit-border-top-left-radius","3px")):(h=n("<span/>"),h.css("float","left"),h.addClass("ui-icon ui-icon-circle-triangle-w"),s.append(h)),c=n("<span/>"),c.css("float","left"),c.html(i),s.append(c),o?(s.css("-moz-border-radius-topright","3px"),s.css("-moz-border-radius-bottomright","3px"),s.css("-webkit-border-top-right-radius","3px"),s.css("-webkit-border-bottom-right-radius","3px")):(h=n("<span/>"),h.css("float","right"),h.addClass("ui-icon ui-icon-circle-triangle-e"),s.append(h)),this.clickEvent_agendaCell!=null&&s.bind("click",{agendaId:t.getAgendaId(),callBack:this.clickEvent_agendaCell},this.clickAgendaFromCalendarHandler),this.mouseOverEvent_agendaCell!=null&&s.bind("mouseover",{agendaId:t.getAgendaId(),callBack:this.mouseOverEvent_agendaCell},this.clickAgendaFromCalendarHandler),s.hover(function(){n(this).css("cursor","pointer")},function(){n(this).css("cursor","auto")}),this.callBack_agendaTooltip&&this.callBack_agendaTooltip(s,r.buildUserAgendaObject(t)),this.addAgendaDivToDays(u,f,s,t.getAgendaId()),u.appendHtml(s)):this.addMoreDivToDays(u,f,v)}};this.clickAgendaFromCalendarHandler=function(n){n.stopPropagation();var t=n.data.callBack;t!=null&&t(n)};this.mouseOverAgendaFromCalendarHandler=function(n){var t=n.data.callBack;t!=null&&t(n)};this.clickAgendaFromCalendarMoreModalDialogHandler=function(n){var i=n.data.dialog,t;i!=null&&i.dialog("close");t=n.data.callBack;t!=null&&t(n);n.stopPropagation()};this.agendaDropHandler=function(i,r){var f=i.data.cal,e,o,u,s;f==null&&alert("Drop Error: Calendar object is null.");e=r.draggable;o=parseInt(e.data("agendaId"));o==null&&alert("Drop Error: Agenda id is null.");u=f.getAgendaItemById(o);u==null&&alert("Drop Error: Agenda item object is null.");s=n(this).data("dayDate");e.fadeOut(function(){e.draggable("destroy");e==null;f.deleteAgendaItemById(o);var n=u.getStartDate(),h=u.getEndDate(),r=t.daysDifferenceDirection(n,s),c=t.addDays(n,r),l=t.addDays(h,r);u.setStartDate(c);u.setEndDate(l);f.addAgendaItem(u);i.data.agendaId=o;i.data.calDayDate=s;f.dropEvent_agendaCell!=null&&f.dropEvent_agendaCell(i)});i.stopPropagation()};this.addMoreDivToDays=function(i,u,f){var h,o;if(i!=null&&u!=null&&f!=null){var s=i.getDate(),y=u.getDate(),c=t.getNextDay(s),e=n("<div/>");e.addClass("JFrontierCal-Agenda-More-Link");e.css("position","absolute");h=this.getAgendaItemsForDay(s);e.html("+ view all ("+h.length+")");e.bind("click",{cal:this,calDayDate:s,agendaItems:h},function(n){n.stopPropagation();r.showMoreAgendaModal(n.data.cal,n.data.calDayDate,n.data.agendaItems)});e.hover(function(){n(this).css("cursor","pointer")},function(){n(this).css("cursor","auto")});var l=i.getY()+i.getHeight()-f-1,a=i.getX(),v=i.getWidth();for(e.css("top",l+"px"),e.css("left",a+"px"),e.css("width",v+"px"),e.css("height",f+"px"),i.addMoreDiv(e);t.daysDifferenceDirection(c,y)>=0;)o=this.getCalendarDayObjByDate(c),s=o.getDate(),e=n("<div/>"),e.addClass("JFrontierCal-Agenda-More-Link"),e.css("position","absolute"),h=this.getAgendaItemsForDay(s),e.html("+ view all ("+h.length+")"),e.bind("click",{cal:this,calDayDate:s,agendaItems:h},function(n){n.stopPropagation();r.showMoreAgendaModal(n.data.cal,n.data.calDayDate,n.data.agendaItems)}),e.hover(function(){n(this).css("cursor","pointer")},function(){n(this).css("cursor","auto")}),l=o.getY()+o.getHeight()-f-1,a=o.getX(),v=o.getWidth(),e.css("top",l+"px"),e.css("left",a+"px"),e.css("width",v+"px"),e.css("height",f+"px"),o.addMoreDiv(e),c=t.getNextDay(c)}};this.addAgendaDivToDays=function(n,i,r,u){var e;if(n!=null&&i!=null&&r!=null&&u!=null){n.addAgendaDivElement(u,r);for(var o=n.getDate(),s=i.getDate(),f=t.getNextDay(o);t.daysDifferenceDirection(f,s)>=0;)e=this.getCalendarDayObjByDate(f),e.addAgendaDivElement(u,r),f=t.getNextDay(f)}};this.getNextAgendaYPosition=function(n,i,r,u){var o,f,c,h;if(n==null||i==null||r==null||u==null)return-1;o=0;f=n.getY();o=f;for(var l=null,e=null,a,v,s,y=1;;){for(e=[],f=n.getNextAgendaYstartY(f,r,u),f>o&&(o=f),e.push(f),a=n.getDate(),v=i.getDate(),s=t.getNextDay(a);t.daysDifferenceDirection(s,v)>=0;)l=this.getCalendarDayObjByDate(s),f=l.getNextAgendaYstartY(f,r,u),f>o&&(o=f),e.push(f),s=t.getNextDay(s);if(f=e[0],f<0)return-1;if(e.length==1)return f;for(c=!0,h=1;h<e.length;h++){if(e[h]<0)return-1;Math.abs(f-e[h])>1&&(c=!1)}if(c)return f;f=o;y+=1}return f};this.getCalendarDayObjByDate=function(n){if(n==null||this.dayHash==null)return null;var t=n.getFullYear()+""+(n.getMonth()+"")+(n.getDate()+"");return this.dayHash.get(t)};this.setDisplayDate=function(n){this.displayDate=n;this.do_init();this.resize()};this.getDisplayDate=function(){return new Date(this.getCurrentYear(),this.getCurrentMonth(),this.getCurrentDay(),0,0,0,0)};this.nextMonth=function(){var n=new Date(0,0,1,0,0,0,0);this.displayDate.getMonth()==11?(n.setFullYear(this.displayDate.getFullYear()+1),n.setMonth(0)):(n.setFullYear(this.displayDate.getFullYear()),n.setMonth(this.displayDate.getMonth()+1));this.setDisplayDate(n)};this.previousMonth=function(){var n=new Date(0,0,1,0,0,0,0);this.displayDate.getMonth()==0?(n.setFullYear(this.displayDate.getFullYear()-1),n.setMonth(11)):(n.setFullYear(this.displayDate.getFullYear()),n.setMonth(this.displayDate.getMonth()-1));this.setDisplayDate(n)};this.buildCalendarHeader=function(){var t=n("<div/>");return t.css("width",this.getWidth()+"px"),new y(t)};this.buildCalendarWeek=function(){var t=n("<div/>");return t.css("width",this.getWidth()+"px"),new w(t)};this.buildCalendarWeekHeader=function(){var t=n("<div/>");return t.css("width",this.getWidth()+"px"),new p(t)};this.buildCalendarHeaderCell=function(){var t=n("<div/>");return t.addClass("JFrontierCal-Header-Cell"),new a(t)};this.buildCalendarWeekHeaderCell=function(){var t=n("<div/>");return t.addClass("JFrontierCal-Week-Header-Cell"),new v(t)};this.buildCalendarDayCell=function(){var t=n("<div/>");return t.addClass("JFrontierCal-Day-Cell"),new c(t)};this.getCurrentYear=function(){return parseInt(this.displayDate.getFullYear())};this.getCurrentMonth=function(){return parseInt(this.displayDate.getMonth())};this.getCurrentDay=function(){return parseInt(this.displayDate.getDate())};this.getNextMonth=function(){var n=new Date(0,0,1,0,0,0,0);return this.getCurrentMonth()==11?(n.setFullYear(this.getCurrentYear()+1),n.setMonth(0)):(n.setFullYear(this.getCurrentYear()),n.setMonth(this.getCurrentMonth()+1)),n};this.getPreviousMonth=function(){var n=new Date(0,0,1,0,0,0,0);return this.getCurrentMonth()==0?(n.setFullYear(this.getCurrentYear()-1),n.setMonth(11)):(n.setFullYear(this.getCurrentYear()),n.setMonth(this.getCurrentMonth()-1)),n};this.getDaysCurrentMonth=function(){return parseInt(t.getDaysInMonth(this.displayDate))};this.getDaysPreviousMonth=function(){var n=this.getPreviousMonth();return parseInt(t.getDaysInMonth(n))};this.getDaysNextMonth=function(){var n=this.getNextMonth();return parseInt(t.getDaysInMonth(n))};this.setHtml=function(n){this.jqyObj.html(n)};this.getHtml=function(){return this.jqyObj.html()};this.setCss=function(n,t){this.jqyObj.css(n,t)};this.getCss=function(n){return this.jqyObj.css(n)};this.setAttr=function(n,t){this.jqyObj.attr(n,t)};this.getAttr=function(n){return this.jqyObj.attr(n)};this.clear=function(n){this.jqyObj.html("");this.calHeaderObj=null;this.weeks=[];this.weekHeaders=[];this.dayHash=new Hashtable;n&&(this.agendaItems=new Hashtable)};this.getHeight=function(){return this.jqyObj.height()};this.getWidth=function(){return this.jqyObj.width()};this.setWidth=function(n){this.jqyObj.width(n);this.resize()};this.getInnerWidth=function(){return this.jqyObj.innerWidth()};this.addHeader=function(n){if(this.calHeaderObj!=null){var t=this.jqyObj.children("div").first();t.remove();this.calHeaderObj=n;this.jqyObj.prepend(n.jqyObj)}else this.calHeaderObj=n,this.jqyObj.prepend(n.jqyObj)};this.addWeek=function(n){this.weeks.push(n);this.jqyObj.append(n.jqyObj)};this.addWeekHeader=function(n){this.weekHeaders.push(n);this.jqyObj.append(n.jqyObj)};this.getWeeks=function(){return this.weeks};this.getWeekHeaders=function(){return this.weekHeaders};this.getNumberWeeks=function(){return this.weeks.length};this.addAgendaItem=function(n){n.getAgendaId()==0&&(n.setAgendaId(this.agendaId),this.agendaId++);this.agendaItems.put(n.getAgendaId(),n);this.renderSingleAgendaItem(n)};this.getAgendaItemsCount=function(){return this.agendaItems.size()};this.getAgendaItems=function(){return this.agendaItems};this.getAgendaItemById=function(n){return this.agendaItems.get(n)};this.getAgendaItemByDataAttr=function(n,t){var i;if(this.agendaItems!=null&&this.agendaItems.size()>0){var r=null,u=null,f=[],e=this.agendaItems.values();for(i=0;i<e.length;i++)r=e[i],u=r.getAgendaData(n),u!=null&&u==t&&f.push(r);return f}return null};this.deleteAgendaItemById=function(n){this.agendaItems!=null&&this.agendaItems.size()>0&&(this.agendaItems.remove(n),this.clearDayCellData(),this.renderAgendaItems())};this.deleteAgendaItemByDataAttr=function(n,t){var r,u;if(this.agendaItems!=null&&this.agendaItems.size()>0){var f=null,e=null,i=[],o=this.agendaItems.values();for(r=0;r<o.length;r++)f=o[r],e=f.getAgendaData(n),e!=null&&e==t&&i.push(f);if(i.length>0){for(u=0;u<i.length;u++)this.deleteAgendaItemById(i[u].getAgendaId());this.clearDayCellData();this.renderAgendaItems()}}};this.deleteAllAgendaItems=function(){this.agendaItems!=null&&this.agendaItems.size()>0&&(this.agendaItems=new Hashtable,this.clearDayCellData(),this.renderAgendaItems())};this.appendJqyObj=function(n){this.jqyObj.append(n)};this.shoutOut=function(){alert("You have a calendar object!")};this.clearDayCellData=function(){var u=0,n=this.getWeeks(),i,t,r;if(n!=null&&n.length>0)for(u=n.length,i=0;i<n.length;i++)if(t=n[i].getDays(),t!=null&&t.length>0)for(r=0;r<t.length;r++)t[r].clearAgendaDivElements()};this.setRenderRatio=function(n){n!=null&&n<=1&&n>0&&(this.aspectRatio=n,this.resize())};this.resize=function(){var i=null,b=null,k=null,d=null,g=null,nt=this.getWidth(),y=this.getWeeks(),h,c,l,u,e,o,t,v,n;y!=null&&y.length>0&&(h=y[0].getDays(),h!=null&&h.length>0&&(i=h[0]));c=this.getWeekHeaders();c!=null&&c.length>0&&(l=c[0].getHeaderCells(),l!=null&&l.length>0&&(b=l[0]));var rt=b.jqyObj.outerHeight(!0),ut=(i.jqyObj.outerWidth(!0)-i.jqyObj.width())*r.dayNames.length,f=Math.floor(nt/r.dayNames.length)-(i.jqyObj.outerWidth(!0)-i.jqyObj.width()),a=f+(nt-f*r.dayNames.length)-(i.jqyObj.outerWidth(!0)-i.jqyObj.width())-ut,tt=parseInt((f-rt)*this.aspectRatio),p=f*6+a+(i.jqyObj.outerWidth(!0)-i.jqyObj.width())*r.dayNames.length+1;if(this.calHeaderObj.setWidth(p),u=this.calHeaderObj.getHeaderCells(),u!=null&&u.length>0)for(e=0;e<u.length;e++)e==u.length-1?u[e].setCss("width",a+"px"):(u[e].setCss("width",f+"px"),d=u[e]);var w=0,s=this.getWeeks(),it=this.getWeekHeaders();if(s!=null&&s.length>0)for(w=s.length,o=0;o<s.length;o++)if(s[o].setWidth(p),it[o].setWidth(p),t=s[o].getDays(),v=it[o].getHeaderCells(),t!=null&&t.length>0)for(n=0;n<t.length;n++)n==t.length-1?(t[n].setCss("width",a+"px"),v[n].setCss("width",a+"px"),t[n].setCss("height",tt+"px"),t[n].clearAgendaDivElements()):(t[n].setCss("width",f+"px"),v[n].setCss("width",f+"px"),t[n].setCss("height",tt+"px"),t[n].clearAgendaDivElements(),k=t[n],g=v[n]);var ft=parseInt(d.jqyObj.outerHeight(!0)),et=parseInt(k.jqyObj.outerHeight(!0)*w),ot=parseInt(g.jqyObj.outerHeight(!0)*w),st=ft+et+ot;this.setCss("height",st+"px");this.renderAgendaItems()};this.getWeekIndex=function(n){return n.toUpperCase()=="SUN"||n.toUpperCase()=="SUNDAY"?0:n.toUpperCase()=="MON"||n.toUpperCase()=="MONDAY"?1:n.toUpperCase()=="TUE"||n.toUpperCase()=="TUESDAY"?2:n.toUpperCase()=="WED"||n.toUpperCase()=="WEDNESDAY"?3:n.toUpperCase()=="THU"||n.toUpperCase()=="THURSDAY"?4:n.toUpperCase()=="FRI"||n.toUpperCase()=="FRIDAY"?5:n.toUpperCase()=="SAT"||n.toUpperCase()=="SATURDAY"?6:-1}}function t(){}function o(){}var e=[],u=new Hashtable,h,f;String.prototype.startsWith=function(n){return this.match("^"+n)==n};r.dayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];r.sortAgendaItemsByStartDate=function(n,i){var u=n.getStartDate(),f=i.getStartDate(),r=t.secondsDifferenceDirection(u,f);return r>0?-1:r<0?1:0};r.buildUserAgendaObject=function(n){var i,t,r,u;if(n==null)return null;if(i=null,t=n.getAgendaDataHash(),t!=null&&t.size()>0){i={};var f=null,e=null,o=t.keys();for(r=0;r<o.length;r++)f=o[r],e=t.get(f),i[f]=e}return u={},u.backgroundColor=n.getBackgroundColor(),u.foregroundColor=n.getForegroundColor(),{agendaId:n.getAgendaId(),title:n.getTitle(),startDate:n.getStartDate(),endDate:n.getEndDate(),allDay:n.isAllDay()?!0:!1,data:i,displayProp:u}};r.showMoreAgendaModal=function(i,u,f){var h,a,s,o,e,c,l;(i==null||u==null||f==null)&&alert("Can't open dialog. One ore more of Calendar/Date/agendaItems parameters are null.");h=i.jqyObj.attr("id")+"-more-agenda-modal";a=n("#"+h).length==0?!1:!0;a&&(n("#"+h).dialog("destroy"),n("#"+h).remove());s=n("<div/>");s.attr("id",h);s.attr("title","Events for "+n.datepicker.formatDate("MM d, yy",u));s.dialog({autoOpen:!1,draggable:!1,maxHeight:200,width:350,modal:!0,resizable:!1,buttons:{Ok:function(){n(this).dialog("close")}},open:function(){},close:function(){}});o=null;e=null;f.sort(r.sortAgendaItemsByStartDate);var v=!1,y=!1,p=null,w=null;for(c=0;c<f.length;c++)o=f[c],p=o.getStartDate(),w=o.getEndDate(),e=n("<div/>"),e.addClass("JFrontierCal-Modal-Agenda-Item"),o.getBackgroundColor()!=null&&e.css("background-color",o.getBackgroundColor()),o.getForegroundColor()!=null&&e.css("color",o.getForegroundColor()),e.css("width","100%"),e.css("height","30px"),e.css("margin-bottom","2px"),v=t.daysDifferenceDirection(p,u)==0?!0:!1,y=t.daysDifferenceDirection(w,u)==0?!0:!1,v?(e.css("-moz-border-radius-bottomleft","3px"),e.css("-moz-border-radius-topleft","3px"),e.css("-webkit-border-bottom-left-radius","3px"),e.css("-webkit-border-top-left-radius","3px")):(l=n("<span/>"),l.css("float","left"),l.addClass("ui-icon ui-icon-circle-triangle-w"),e.append(l)),y&&(e.css("-moz-border-radius-topright","3px"),e.css("-moz-border-radius-bottomright","3px"),e.css("-webkit-border-top-right-radius","3px"),e.css("-webkit-border-bottom-right-radius","3px")),e.append(o.getTitle()+"<br>"),e.append(o.getAgendaData("GetTimeDisplay")+"<br>"),i.clickEvent_agendaCell!=null&&e.bind("click",{agendaId:o.getAgendaId(),callBack:i.clickEvent_agendaCell,dialog:s},i.clickAgendaFromCalendarMoreModalDialogHandler),e.hover(function(){n(this).css("cursor","pointer")},function(){n(this).css("cursor","auto")}),s.append(e);s.dialog("open")};r.loadICalSource=function(i,r,u){i!=null&&r!=null&&n.ajax({url:r,type:"POST",data:{chromeFix:""},dataType:u,success:function(n){var u,b,k,d,g,o,h,c,nt,tt,it,l,a,v,p,w,y,e,rt;if(n==null||n==""){alert("iCal load error: Returned data was null or empty string.\n\nSource, "+r);return}if(f.clear(),f.parseIcal(n),f.ical.events.length>0)for(y=0;y<f.ical.events.length;y++)u=f.ical.events[y],b=u.summary!=null?u.summary.value:"",k=(u.dtstart!=null?u.dtstart.value:"").substring(0,4),d=(u.dtstart!=null?u.dtstart.value:"").substring(4,6).replace(/^[0]+/g,""),g=(u.dtstart!=null?u.dtstart.value:"").substring(6,8).replace(/^[0]+/g,""),o=(u.dtstart!=null?u.dtstart.value:"").substring(9,11).replace(/^[0]+/g,""),h=(u.dtstart!=null?u.dtstart.value:"").substring(11,13).replace(/^[0]+/g,""),c=(u.dtstart!=null?u.dtstart.value:"").substring(13,15).replace(/^[0]+/g,""),o==""&&(o="0"),h==""&&(h="0"),c==""&&(c="0"),nt=(u.dtend!=null?u.dtend.value:"").substring(0,4),tt=(u.dtend!=null?u.dtend.value:"").substring(4,6).replace(/^[0]+/g,""),it=(u.dtend!=null?u.dtend.value:"").substring(6,8).replace(/^[0]+/g,""),l=(u.dtend!=null?u.dtend.value:"").substring(9,11).replace(/^[0]+/g,""),a=(u.dtend!=null?u.dtend.value:"").substring(11,13).replace(/^[0]+/g,""),v=(u.dtend!=null?u.dtend.value:"").substring(13,15).replace(/^[0]+/g,""),l==""&&(l="0"),a==""&&(a="0"),v==""&&(v="0"),p=new Date(parseInt(k),parseInt(d)-1,parseInt(g),parseInt(o)-1,parseInt(h),parseInt(c),0),w=new Date(parseInt(nt),parseInt(tt)-1,parseInt(it),parseInt(l)-1,parseInt(a),parseInt(v),0),t.secondsDifferenceDirection(p,w)>=0&&(e=new Hashtable,e.put("UID",u.uid!=null?u.uid.value:""),e.put("SUMMARY",u.summary!=null?u.summary.value:""),e.put("DTSTART",u.dtstart!=null?u.dtstart.value:""),e.put("DTEND",u.dtend!=null?u.dtend.value:""),e.put("CLASS",u.classification!=null?u.classification.value:""),e.put("CREATED",u.created!=null?u.created.value:""),e.put("DESCRIPTION",u.description!=null?u.description.value:""),e.put("GEO",u.geo!=null?u.geo.value:""),e.put("LAST-MODIFIED",u.lastmod!=null?u.lastmod.value:""),e.put("LOCATION",u.location!=null?u.location.value:""),e.put("ORGANIZER",u.organizer!=null?u.organizer.value:""),e.put("PRIORITY",u.priority!=null?u.priority.value:""),e.put("DTSTAMP",u.dtstamp!=null?u.dtstamp.value:""),e.put("SEQUENCE",u.seq!=null?u.seq.value:""),e.put("STATUS",u.status!=null?u.status.value:""),e.put("TRANSP",u.transp!=null?u.transp.value:""),e.put("URL",u.url!=null?u.url.value:""),e.put("RECURRENCE-ID",u.recurid!=null?u.recurid.value:""),e.put("DURATION",u.duration!=null?u.duration.value:""),e.put("ATTACH",u.attach!=null?u.attach.value:""),e.put("ATTENDEE",u.attendee!=null?u.attendee.value:""),e.put("CATEGORIES",u.categories!=null?u.categories.value:""),e.put("COMMENT",u.comment!=null?u.comment.value:""),e.put("CONTACT",u.contact!=null?u.contact.value:""),e.put("EXDATE",u.exdate!=null?u.exdate.value:""),e.put("EXRULE",u.exrule!=null?u.exrule.value:""),e.put("REQUEST-STATUS",u.rstatus!=null?u.rstatus.value:""),e.put("RELATED",u.related!=null?u.related.value:""),e.put("RESOURCES",u.resources!=null?u.resources.value:""),e.put("RDATE",u.rdate!=null?u.rdate.value:""),e.put("RRULE",u.rrule!=null?u.rrule.value:""),e.put("X-",u.xprop!=null?u.xprop.value:""),rt=new s(b,p,w,!1,e),i.addAgendaItem(rt))},error:function(n,t,i){alert("iCal load error: Failure in requesting "+r+": "+i)}})};t.getDaysInMonth=function(n){return 32-new Date(n.getFullYear(),n.getMonth(),32).getDate()};t.isDateBetween=function(n,i,r){return n==null||i==null||r==null?!1:t.daysDifferenceDirection(n,i)<=0&&t.daysDifferenceDirection(n,r)>=0?!0:!1};t.daysDifference=function(n,t){var i=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0),r=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),u=i.getTime(),f=r.getTime(),e=Math.abs(f-u);return e/864e5};t.daysDifferenceDirection=function(n,t){var i=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0),r=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0);return(r.getTime()-i.getTime())/864e5};t.secondsDifferenceDirection=function(n,t){return Math.round((t.getTime()-n.getTime())/1e3)};t.getNextDay=function(n){var e=n.getDay(),u=n.getDate(),r=n.getMonth(),i=n.getFullYear(),f=t.getDaysInMonth(n);return u==f?i==11?new Date(i+1,r+1,1,0,0,0,0):new Date(i,r+1,1,0,0,0,0):new Date(i,r,u+1,0,0,0,0)};t.addDays=function(n,t){return new Date(n.getTime()+t*864e5)};t.getPreviousMonth=function(n){var t=new Date(0,0,1,0,0,0,0);return t.getMonth()==0?(t.setFullYear(n.getFullYear()-1),t.setMonth(11)):(t.setFullYear(n.getFullYear()),t.setMonth(n.getMonth()-1)),t};t.getFirstDayInSameWeek=function(n){var f=n.getDay(),e=n.getDate(),i=n.getMonth(),r=n.getFullYear(),c=t.getDaysInMonth(n),u;if(f==0)return new Date(r,i,e,0,0,0,0);if(u=e-f,u<1){var s=t.getPreviousMonth(n),h=t.getDaysInMonth(s),o=h+u;return i==0?new Date(r-1,11,o,0,0,0,0):new Date(r,i-1,o,0,0,0,0)}return new Date(r,i,u,0,0,0,0)};t.getLastDayInSameWeek=function(n){var o=n.getDay(),r=n.getDate(),u=n.getMonth(),i=n.getFullYear(),s=t.getDaysInMonth(n),f,e;return o==6?new Date(i,u,r,0,0,0,0):(f=6-o,r+f>s?(e=f-(s-r),i==11?new Date(i+1,u+1,e,0,0,0,0):new Date(i,u+1,e,0,0,0,0)):new Date(i,u,r+f,0,0,0,0))};t.getFirstDayNextWeek=function(n){var s=n.getDay(),u=n.getDate(),r=n.getMonth(),i=n.getFullYear(),h=t.getDaysInMonth(n),f,e,o;return s==0?new Date(i,r,u,0,0,0,0):(f=6-s,e=u+f+1,e>h?(o=f-(h-u)+1,i==11?new Date(i+1,r+1,o,0,0,0,0):new Date(i,r+1,o,0,0,0,0)):new Date(i,r,e,0,0,0,0))};t.getAgendaDisplayTime=function(n){if(n==null)return"";var u=":",t=n.getHours(),i=n.getMinutes(),r="am";return i==0?(i="",u=""):i<10&&(i="0"+i),t==0?t=12:t==12?(t=12,r="pm"):t>12&&(t=t-12,r="pm"),t+u+i+r};o.log=function(){};n.fn.jFrontierCal=function(t,i){var u=n(this).attr("id"),r,f={foo:"bar",date:new Date,dayClickCallback:function(){},agendaClickCallback:function(n){n.stopPropagation()},agendaDropCallback:function(){},agendaMouseoverCallback:function(){},applyAgendaTooltipCallback:function(){},agendaDragStartCallback:function(){},agendaDragStopCallback:function(){},dragAndDropEnabled:!0},i;return n.isPlainObject(t)?(i=t,r=n.extend(f,i),e[u]=r):(r=n.extend(f,i),e[u]=r),this.each(function(){var i=n(this),t,f,o,s;i.data("plugin")||(t=e[u],f=new h(i,t.dayClickCallback,t.agendaClickCallback,t.agendaDropCallback,t.dragAndDropEnabled,t.agendaMouseoverCallback,t.applyAgendaTooltipCallback,t.agendaDragStartCallback,t.agendaDragStopCallback),f.init(),o=r.date.getFullYear(),s=r.date.getMonth(),f.showMonth("#"+i.attr("id"),o.toString(),s.toString()),i.data("plugin",f))})};h=function(i,f,e,o,h,c,l,a,v){function y(n){return n!=null&&n.startsWith("#")?n.substring(1,n.length):n}var it=this,p=i.attr("id"),w=f,b=e,k=o,d=c,g=l,nt=a,tt=v;this.init=function(){var f=new Date,t=new r;return t.initialize(i,f,w,b,k,h,d,g,nt,tt),u.put(p,t),n(window).wresize(this.doResizeAll),this.doResizeAll(),this.doResizeAll(),t};this.addAgendaItem=function(n,i,r,f,e,o,h){var l,a,c,v;if(n!=null&&i!=null&&r!=null&&f!=null&&e!=null){if(t.secondsDifferenceDirection(r,f)<0){alert("Sorry, you can't create an event that ends before it starts");return}if(n=y(n),l=new Hashtable,o!=null)for(a in o)l.put(a,o[a]);c=new s(i,r,f,e,l);h!=null&&(h.backgroundColor!=null&&c.setBackgroundColor(h.backgroundColor),h.foregroundColor!=null&&c.setForegroundColor(h.foregroundColor));v=u.get(n);v.addAgendaItem(c)}};this.getAllAgendaItems=function(n){var o=[],s,t,f,e,i,h;if(n!=null&&(n=y(n),s=u.get(n),t=s.getAgendaItems(),t!=null&&t.size()>0))for(f=null,e=t.values(),i=0;i<e.length;i++)h=e[i],f=r.buildUserAgendaObject(h),o.push(f);return o};this.getAgendaItemById=function(n,t){if(n!=null&&t!=null){n=y(n);var f=u.get(n),i=f.getAgendaItemById(parseInt(t));return i==null?null:r.buildUserAgendaObject(i)}};this.getAgendaItemByDataAttr=function(n,t,i){var o,h,f,s,e,c;if(n!=null&&t!=null&&i!=null){if(o=[],n=y(n),h=u.get(n),f=h.getAgendaItemByDataAttr(t,i),f!=null&&f.length>0)for(s=null,e=0;e<f.length;e++)c=f[e],s=r.buildUserAgendaObject(c),o.push(s);return o}return null};this.deleteAgendaItemById=function(n,t){if(n!=null&&t!=null){n=y(n);var i=u.get(n);i.deleteAgendaItemById(t)}};this.deleteAgendaItemByDataAttr=function(n,t,i){if(n!=null&&t!=null&&i!=null){n=y(n);var r=u.get(n);r.deleteAgendaItemByDataAttr(t,i)}};this.deleteAllAgendaItems=function(n){if(n!=null){n=y(n);var t=u.get(n);t.deleteAllAgendaItems()}};this.getAgendaItemsCount=function(n){if(n!=null){n=y(n);var t=u.get(n);return t.getAgendaItemsCount()}};this.showPreviousMonth=function(n){if(n!=null){n=y(n);var t=u.get(n);t.previousMonth()}};this.showNextMonth=function(n){if(n!=null){n=y(n);var t=u.get(n);t.nextMonth()}};this.showMonth=function(n,t,i){if(n!=null&&t!=null&&i!=null&&t.length==4&&(i.length==1||i.length==2)){n=y(n);var r=parseInt(t),f=parseInt(i),e=new Date(r,f,1,0,0,0,0),o=u.get(n);o.setDisplayDate(e)}};this.getCurrentDate=function(n){if(n!=null){n=y(n);var t=u.get(n);return t.getDisplayDate()}};this.reRenderAgendaItems=function(n){if(n!=null){n=y(n);var t=u.get(n);t.clearDayCellData();t.renderAgendaItems()}};this.doResizeAll=function(){var t,n;if(u!=null&&u.size()>0)for(t=u.values(),n=0;n<t.length;n++)t[n].resize()};this.doResize=function(n){if(u!=null&&u.size()>0&&n!=null){n=y(n);var t=u.get(n);t.resize()}};this.setAspectRatio=function(n,t){if(n!=null&&t!=null)if(t>1||t<=0)alert("Ratio is out of range. Ratio must be less than or equal to 1, and greater than 0.");else{n=y(n);var i=u.get(n);i.setRenderRatio(t)}};this.loadICalSource=function(n,t,i){if(n!=null&&t!=null){n=y(n);var f=u.get(n);r.loadICalSource(f,t,i)}}};f={ical:{version:"",prodid:"",events:[],todos:[],journals:[],freebusys:[]},test:function(){alert("icalParser test is good!")},clear:function(){this.ical.version="";this.ical.prodid="";this.ical.events=[];this.ical.todos=[];this.ical.journals=[];this.ical.freebusys=[]},parseIcal:function(n){this.ical.version=this.getValue("VERSION",n,!1);this.ical.prodid=this.getValue("PRODID",n,!1);var r=/BEGIN:VEVENT(\r?\n[^B].*)+/g,t=n.match(r);if(t)for(i=0;i<t.length;i++)this.parseVevent(t[i]);if(r=/BEGIN:VTODO(\r?\n[^B].*)+/g,t=n.match(r),t)for(i=0;i<t.length;i++)this.parseVtodo(t[i]);if(r=/BEGIN:VJOURNAL(\r?\n[^B].*)+/g,t=n.match(r),t)for(i=0;i<t.length;i++)this.parseVjournal(t[i]);if(r=/BEGIN:VFREEBUSY(\r?\n[^B].*)+/g,t=n.match(r),t)for(i=0;i<t.length;i++)this.parseVfreebusy(t[i])},parseVfreebusy:function(n){var t={contact:this.getValue("CONTACT",n,!1),dtstart:this.getValue("DTSTART",veventString,!1),dtend:this.getValue("DTEND",veventString,!1),duration:this.getValue("DURATION",n,!1),description:this.getValue("DESCRIPTION",n,!1),dtstamp:this.getValue("DTSTAMP",n,!1),organizer:this.getValue("ORGANIZER",n,!1),uid:this.getValue("UID",n,!1),url:this.getValue("URL",n,!1),attendee:this.getValue("ATTENDEE",n,!0),comment:this.getValue("COMMENT",n,!0),freebusy:this.getValue("FREEBUSY",n,!0),rstatus:this.getValue("REQUEST-STATUS",n,!0),xprop:this.getValue("X-",n,!0)};this.ical.freebusys[this.ical.freebusys.length]=t},parseVjournal:function(n){var t={classification:this.getValue("CLASS",n,!1),created:this.getValue("CREATED",n,!1),description:this.getValue("DESCRIPTION",n,!1),dtstart:this.getValue("DTSTART",veventString,!1),dtstamp:this.getValue("DTSTAMP",n,!1),lastmod:this.getValue("LAST-MODIFIED",n,!1),organizer:this.getValue("ORGANIZER",n,!1),recurid:this.getValue("RECURRENCE-ID",n,!1),seq:this.getValue("SEQUENCE",n,!1),status:this.getValue("STATUS",n,!1),summary:this.getValue("SUMMARY",n,!1),uid:this.getValue("UID",n,!1),url:this.getValue("URL",n,!1),attach:this.getValue("ATTACH",n,!0),attendee:this.getValue("ATTENDEE",n,!0),categories:this.getValue("CATEGORIES",n,!0),comment:this.getValue("COMMENT",n,!0),contact:this.getValue("CONTACT",n,!0),exdate:this.getValue("EXDATE",n,!0),exrule:this.getValue("EXRULE",n,!0),related:this.getValue("RELATED",n,!0),rdate:this.getValue("RDATE",n,!0),rrule:this.getValue("RRULE",n,!0),rstatus:this.getValue("REQUEST-STATUS",n,!0),xprop:this.getValue("X-",n,!0)};this.ical.journals[this.ical.journals.length]=t},parseVtodo:function(n){var t={classification:this.getValue("CLASS",n,!1),completed:this.getValue("COMPLETED",n,!1),created:this.getValue("CREATED",n),description:this.getValue("DESCRIPTION",n,!1),dtstamp:this.getValue("DTSTAMP",n,!1),geo:this.getValue("GEO",n,!1),lastmod:this.getValue("LAST-MODIFIED",n,!1),location:this.getValue("LOCATION",n,!1),organizer:this.getValue("ORGANIZER",n,!1),percent:this.getValue("PERCENT-COMPLETE",n,!1),priority:this.getValue("PRIORITY",n,!1),recurid:this.getValue("RECURRENCE-ID",n,!1),seq:this.getValue("SEQUENCE",n,!1),status:this.getValue("STATUS",n,!1),summary:this.getValue("SUMMARY",n,!1),uid:this.getValue("UID",n,!1),url:this.getValue("URL",n,!1),due:this.getValue("DUE",n,!1),duration:this.getValue("DURATION",n,!1),attach:this.getValue("ATTACH",n,!0),attendee:this.getValue("ATTENDEE",n,!0),categories:this.getValue("CATEGORIES",n,!0),comment:this.getValue("COMMENT",n,!0),contact:this.getValue("CONTACT",n,!0),exdate:this.getValue("EXDATE",n,!0),exrule:this.getValue("EXRULE",n,!0),rstatus:this.getValue("REQUEST-STATUS",n,!0),related:this.getValue("RELATED",n,!0),resources:this.getValue("RESOURCES",n,!0),rdate:this.getValue("RDATE",n,!0),rrule:this.getValue("RRULE",n,!0),xprop:this.getValue("X-",n,!0)};this.ical.todos[this.ical.todos.length]=t},parseVevent:function(n){var t={classification:this.getValue("CLASS",n,!1),created:this.getValue("CREATED",n,!1),description:this.getValue("DESCRIPTION",n,!1),geo:this.getValue("GEO",n,!1),lastmod:this.getValue("LAST-MODIFIED",n,!1),location:this.getValue("LOCATION",n,!1),organizer:this.getValue("ORGANIZER",n,!1),priority:this.getValue("PRIORITY",n,!1),dtstamp:this.getValue("DTSTAMP",n,!1),seq:this.getValue("SEQUENCE",n,!1),status:this.getValue("STATUS",n,!1),transp:this.getValue("TRANSP",n,!1),url:this.getValue("URL",n,!1),recurid:this.getValue("RECURRENCE-ID",n,!1),duration:this.getValue("DURATION",n,!1),attach:this.getValue("ATTACH",n,!0),attendee:this.getValue("ATTENDEE",n,!0),categories:this.getValue("CATEGORIES",n,!0),comment:this.getValue("COMMENT",n,!0),contact:this.getValue("CONTACT",n,!0),exdate:this.getValue("EXDATE",n,!0),exrule:this.getValue("EXRULE",n,!0),rstatus:this.getValue("REQUEST-STATUS",n,!0),related:this.getValue("RELATED",n,!0),resources:this.getValue("RESOURCES",n,!0),rdate:this.getValue("RDATE",n,!0),rrule:this.getValue("RRULE",n,!0),xprop:this.getValue("X-",n,!0),uid:this.getValue("UID",n,!1),summary:this.getValue("SUMMARY",n,!1),dtstart:this.getValue("DTSTART",n,!1),dtend:this.getValue("DTEND",n,!1)};this.ical.events[this.ical.events.length]=t},getValue:function(n,t,i){var f,s,r,h,c,o,u,e;if(i){if(eval("var matches=txt.match(/\\n"+n+"[^:]*/g)"),f=[],r){for(l=0;l<r.length;l++)r[l]=r[l].replace(/;.*/,""),f[f.length]=this.getValue(r[l],t);return f}}else{if(s=new RegExp("("+n+")(;[^=]*=[^;:\n]*)*:([^\n]*)","g"),r=s.exec(t),r){if(h=RegExp.$3,RegExp.$2.length>0){for(o=RegExp.$2.substr(1).split(";"),e="",k=0;k<o.length;k++)u=o[k].split("="),u[1]||(u[1]=u[0]),e+=u[0].replace(/-/,"")+' : "'+u[1]+'", ';eval("tab_params=( { "+e.substr(0,e.length-2)+" } );")}return{value:h,params:c}}return null}}}})(jQuery),function(n){n.fn.wresize=function(t){function i(){var t,i;if(n.browser.msie)if(wresize.fired){if(t=parseInt(n.browser.version,10),wresize.fired=!1,t<7)return!1;if(t==7&&(i=n(window).width(),i!=wresize.width))return wresize.width=i,!1}else wresize.fired=!0;return!0}function r(n){if(i())return t.apply(this,[n])}return version="1.1",wresize={fired:!1,width:0},this.each(function(){this==window?n(this).resize(r):n(this).resize(t)}),this}}(jQuery);SVG.Weekpicker||(SVG.Weekpicker={});SVG.Weekpicker.GetWeek=function(n){var r=[],t;for(i=0;i<7;i++)t=new Date(n.getTime()),t.setDate(t.getDate()+i),r.push(t.getTime());return r};SVG.Weekpicker.Week=[];SVG.Weekpicker.HighlightWeek=function(n){return $.inArray(n.getTime(),SVG.Weekpicker.Week)>=0?[!0,"highlighted-week","Week Range"]:[!0,"",""]};SVG.Weekpicker.Reset=function(){$("#weekpicker.eventpicker").datepicker("setDate",new Date);$("#weekpicker").find("td.highlighted-week").removeClass("highlighted-week")};SVG.Weekpicker.Init=function(){SVG.Weekpicker.Week=SVG.Weekpicker.GetWeek(new Date);$("#weekpicker.eventpicker").datepicker({dateFormat:"yy-mm-dd",beforeShowDay:SVG.Weekpicker.HighlightWeek,onSelect:function(n){var i;$("#calendarWidgetForm").find('input[name="StartDate"]').val(n);$("#calendarWidgetForm").find('input[name="CurrenPage"]').val(1);i=new Date(n);SVG.Weekpicker.Week=SVG.Weekpicker.GetWeek(i);var t=$("#resultCt"),r=t.data("targetFormId"),u=$("#"+r);typeof u.data("invalidforcalendar")=="undefined"&&t.data("actualTargetFormId",r);t.data("targetFormId","calendarWidgetForm");$("#calendarWidgetForm").submit();$("#SearchValue").val("")}})};EventCalendar={};EventCalendar.ViewSwitch=function(n){this.CurrentEventAgendaItemTimeouts=[];this.ShowEventDetailsInModalUrl=n;this.CalendarViewButton=$("#loadEventCalendar");this.ListViewButton=$("#loadEventList");this.EventListContainer=$("#resultCt");this.EventSearchDescriptionTemplate=$("#eventSearchDescriptionTemplate");this.NextMonthId="#nextMonth";this.PrevMonthId="#prevMonth";this.ViewTypeFormInput=$("#view");this.EventIndexForm=$("#loadEventIndex");this.CurrentColorList={};this.AddEventBatchContinueFlag=!1;this.LegendContainer=$("#addLegendHere");this.InvolvementCalendarColors={attended:{backgroundColor:"#39c",foregroundColor:"#fff",label:"Attended"},invited:{backgroundColor:"#f40",foregroundColor:"#fff",label:"Invited"},"invited-maybe":{backgroundColor:"#fa4",foregroundColor:"#444",label:"Maybe Attending"},"invited-accepted":{backgroundColor:"#bd6",foregroundColor:"#333",label:"Attending"},group:{backgroundColor:"#fe8",foregroundColor:"#444",label:"Organization"},keys:["attended","invited","invited-maybe","invited-accepted","group"]};this.EventIndexColors={public:{backgroundColor:"#36c",foregroundColor:"#fff",label:"Public"},campus:{backgroundColor:"#39c",foregroundColor:"#fff",label:"Campus Only"},keys:["public","campus"]};this.GroupEventColors={public:{backgroundColor:"#36c",foregroundColor:"#fff",label:"Public"},campus:{backgroundColor:"#39c",foregroundColor:"#fff",label:"Campus Only"},group:{backgroundColor:"#fe8",foregroundColor:"#444",label:"Organization Only"},keys:["public","campus","group"]}};EventCalendar.ViewSwitch.prototype.BuildLegend=function(){for(var i=$('<ul id="calendar-legend" class="clearfix"><\/ul>'),u=this.CurrentColorList.keys,n=0;n<this.CurrentColorList.keys.length;n++){var t=$("<li>"),f=u[n],r=this.CurrentColorList[f],e=$('<span class="calendar-legend-color"><\/span>').css({background:r.backgroundColor}),o=$("<span><\/span>").html(r.label);t.append(e);t.append(o);i.append(t)}this.LegendContainer.append(i)};EventCalendar.ViewSwitch.prototype.getColor=function(n){if(n.IsAttendedEvent)return this.CurrentColorList.attended;if(n.IsInvitedEvent){if(n.NotYetAccepted)return this.CurrentColorList.invited;if(n.MayBe)return this.CurrentColorList["invited-maybe"];if(n.Accepted)return this.CurrentColorList["invited-accepted"]}return n.IsGroupEvent?this.CurrentColorList.group:n.EventTypeName=="Campus Only"?this.CurrentColorList.campus:this.CurrentColorList.public};EventCalendar.ViewSwitch.prototype.getAjaxDataType=function(){var n=this;return n.ViewTypeFormInput.val()=="list"?"html":"json"};EventCalendar.ViewSwitch.prototype.renderEvents=function(n){var t=this,i,r;if(t.EventListContainer.data("currentmonth",n.DateModel.CurrentMonth),t.EventListContainer.data("currentyear",n.DateModel.CurrentYear),t.EventListContainer.data("nextmonth",n.DateModel.NextMonth),t.EventListContainer.data("nextyear",n.DateModel.NextYear),t.EventListContainer.data("previousmonth",n.DateModel.PreviousMonth),t.EventListContainer.data("previousyear",n.DateModel.PreviousYear),t.EventListContainer.empty(),t.EventListContainer.append(t.EventSearchDescriptionTemplate.clone().show().removeAttr("id")),t.EventListContainer.find("#monthyear").html(n.DateModel.MonthYear),typeof n.Search=="object"&&(t.EventListContainer.find("#eventSearchDescription").html(n.Search.EventSearchDescriptionText),typeof n.Search.EventSearchDescriptionText=="string"&&(n.Search.EventSearchDescriptionText===""?t.EventListContainer.find(".clearFilter").hide():t.EventListContainer.find(".clearFilter").show())),t.EventListContainer.append('<div id="mycal"><\/div>'),i=new Date,i.setDate(1),i.setYear(n.DateModel.CurrentYear),i.setMonth(n.DateModel.CurrentMonth-1),r=$("#mycal").jFrontierCal({date:i,agendaClickCallback:function(n){var f=n.data.agendaId,i=r.getAgendaItemById("#mycal",f),u;i.data.eventId!=="undefined"&&(u=t.ShowEventDetailsInModalUrl+"/"+i.data.eventId,window.location=u)},dragAndDropEnabled:!1}).data("plugin"),r.setAspectRatio("#mycal"),this.ClearEventAgendaRunningAdditions(),n.Events.length>0){if(n.Events.length>60){this.AddEventBatchContinueFlag=!0;t.BatchedEventAddition(n,r,t);return}var f=(new Date).getTimezoneOffset()*6e4,e=n.DateModel.ServerOffSetInMilliseconds,u=f+e;$.each(n.Events,function(n,i){r.addAgendaItem("#mycal",i.Name,new Date(i.StartDateTimeTicks+u),new Date(i.EndDateTimeTicks+u),!1,{eventId:i.Id,GetTimeDisplay:i.GetTimeDisplay},t.getColor(i))})}};EventCalendar.ViewSwitch.prototype.BatchedEventAddition=function(n,t,i){var r=this,f=(new Date).getTimezoneOffset()*6e4,e=n.DateModel.ServerOffSetInMilliseconds,u=f+e;i.AddEventBatchContinueFlag&&r.CurrentEventAgendaItemTimeouts.push(setTimeout(function(){var f=n.Events.shift();t.addAgendaItem("#mycal",f.Name,new Date(f.StartDateTimeTicks+u),new Date(f.EndDateTimeTicks+u),!1,{eventId:f.Id,GetTimeDisplay:f.GetTimeDisplay},i.getColor(f));n.Events.length>0&&i.AddEventBatchContinueFlag?r.CurrentEventAgendaItemTimeouts.push(setTimeout(arguments.callee,100)):i.AddEventBatchContinueFlag=!1},100))};EventCalendar.ViewSwitch.prototype.ClearEventAgendaRunningAdditions=function(){if(this.CurrentEventAgendaItemTimeouts&&this.CurrentEventAgendaItemTimeouts.length>0)for(var n=0;n<this.CurrentEventAgendaItemTimeouts.length;n++)clearTimeout(this.CurrentEventAgendaItemTimeouts[n]);this.CurrentEventAgendaItemTimeouts=[]};EventCalendar.ViewSwitch.prototype.AddRemoveMonthLimits=function(n){var t=this,i,r;$("#view").val()=="calendar"?(i=t.EventListContainer.data("currentmonth"),r=t.EventListContainer.data("currentyear"),n.find('input[name="CurrentMonth"]').val(i),n.find('input[name="CurrentYear"]').val(r)):(n.find('input[name="CurrentMonth"]').attr("value",""),n.find('input[name="CurrentYear"]').attr("value",""))};EventCalendar.ViewSwitch.prototype.LoadCalendar=function(){this.EventIndexForm.find('input[name="view"]').val("calendar");this.EventIndexForm.submit()};EventCalendar.ViewSwitch.prototype.AttachEventsOnInit=function(){var n=this;n.CalendarViewButton.on("click",function(t){var i,r,u,f;t.preventDefault();t.stopPropagation();n.ListViewButton.show();n.CalendarViewButton.hide();i=n.EventListContainer.data("targetFormId");typeof i=="undefined"?r=n.EventIndexForm:(r=$("#"+i),typeof r.data("invalidforcalendar")!="undefined"&&(i=n.EventListContainer.data("actualTargetFormId"),r=typeof i=="undefined"?n.EventIndexForm:$("#"+i)));$(".view-control").each(function(n,t){$(t).val("calendar")});u=n.EventListContainer.data("resetmonth");f=n.EventListContainer.data("resetyear");n.EventListContainer.data("currentmonth",u);n.EventListContainer.data("currentyear",f);n.AddRemoveMonthLimits(r);r.submit()});n.ListViewButton.on("click",function(t){var i,r,u,f;t.preventDefault();t.stopPropagation();n.AddEventBatchContinueFlag=!1;n.ListViewButton.hide();n.CalendarViewButton.show();i=n.EventListContainer.data("targetFormId");typeof i=="undefined"?r=n.EventIndexForm:(i=="pastEventForm"&&(i=$("#pastEventForm").data("targetFormId")),r=$("#"+i));$(".view-control").each(function(n,t){$(t).val("list")});u=n.EventListContainer.data("resetmonth");f=n.EventListContainer.data("resetyear");n.EventListContainer.data("currentmonth",u);n.EventListContainer.data("currentyear",f);n.AddRemoveMonthLimits(r);r.submit()});n.EventListContainer.on("click",n.NextMonthId,function(t){var i,r,u,f;t.preventDefault();t.stopPropagation();n.AddEventBatchContinueFlag=!1;$(".view-control").each(function(n,t){$(t).val("calendar")});i=n.EventListContainer.data("targetFormId");r=typeof i=="undefined"?n.EventIndexForm:$("#"+i);u=n.EventListContainer.data("nextmonth");f=n.EventListContainer.data("nextyear");n.EventListContainer.data("currentmonth",u);n.EventListContainer.data("currentyear",f);n.AddRemoveMonthLimits(r);r.submit()});n.EventListContainer.on("click",n.PrevMonthId,function(t){var i;t.preventDefault();t.stopPropagation();n.AddEventBatchContinueFlag=!1;var r=n.EventListContainer.data("targetFormId"),u=n.EventListContainer.data("previousmonth"),f=n.EventListContainer.data("previousyear");i=typeof r=="undefined"?n.EventIndexForm:$("#"+r);$(".view-control").each(function(n,t){$(t).val("calendar")});n.EventListContainer.data("currentmonth",u);n.EventListContainer.data("currentyear",f);n.AddRemoveMonthLimits(i);i.submit()})};EventCalendar.ViewSwitch.prototype.init=function(n){var t=this;switch(n){case"involvementcalendar":t.CurrentColorList=t.InvolvementCalendarColors;break;case"groupeventcalendar":t.CurrentColorList=t.GroupEventColors;break;default:t.CurrentColorList=t.EventIndexColors}t.AttachEventsOnInit()};EventDirectory={};EventDirectory.EventsIndex=function(n,t){this.SearchByCalenderDiv=$("#searchByCalendar");this.ViewSwitch=new EventCalendar.ViewSwitch(n);this.AttendUrl=t};EventDirectory.EventsIndex.prototype.AttachEvents=function(){var t=this,n=this.ViewSwitch;$(".modal").click(function(){var t=$("<div/>"),n=core.modal.init(t,{content:$(this).data("action")+"/"+$(this).data("eventid"),width:616,modal:!0,activate:function(){$("#aria-label-eventModal").focus()},deactivate:function(){n.destroy()},refresh:function(){n.center();n.open()}})});$("#pager a").on("click",function(t){t.stopPropagation();var r=n.EventListContainer.data("targetFormId"),i;i=typeof r=="undefined"?n.EventIndexForm:$("#"+r);i.find('input[name="CurrentPage"]').val($(this).data("currentpage"));n.AddRemoveMonthLimits(i);i.submit()});$(".attendedEventToggle").click(function(n){n.preventDefault();var u=$(this).data("eventid"),f=$("input[name=__RequestVerificationToken]").val(),i=$(this),r=i.attr("aria-pressed")=="true"?!1:!0;$.ajax({type:"POST",data:{__RequestVerificationToken:f,eventId:u,attended:r},url:t.AttendUrl,success:function(){r?(i.attr("aria-pressed",!0),i.find("span").removeClass("glyphicon-unchecked").addClass("glyphicon-check")):(i.attr("aria-pressed",!1),i.find("span").removeClass("glyphicon-check").addClass("glyphicon-unchecked").attr("aria-pressed",!1))}})})};EventDirectory.EventsIndex.prototype.init=function(){var i=this,n=this.ViewSwitch,t;n.init();n.BuildLegend("eventindex");i.AttachEvents();t=function(r){if(n.ViewTypeFormInput.val()=="list"){var u=n.EventListContainer.data("targetFormId");u!=="calendarWidgetForm"&&SVG.Weekpicker.Reset();n.EventListContainer.html(r);i.SearchByCalenderDiv.show();i.AttachEvents();$("#pastEventForm").ajaxForm({success:t})}else i.SearchByCalenderDiv.hide(),n.renderEvents(r)};$(".accordion").accordion({active:!1,collapsible:!0,autoHeight:!1,header:"h4",heightStyle:"content"});n.EventListContainer.on("click","#ShowPastEvents",function(){var t,r,i;$("#pastEventForm")&&(t=n.EventListContainer.data("targetFormId"),r=$("#"+t),typeof r.data("invalidforcalendar")=="undefined"&&n.EventListContainer.data("actualTargetFormId",t),i=$("#pastEventForm"),n.EventListContainer.data("targetFormId","pastEventForm"),n.AddRemoveMonthLimits(i),i.submit())});$("#searchForm").ajaxForm({datatype:n.getAjaxDataType(),success:t,complete:function(){n.EventListContainer.data("targetFormId","searchForm")}});$("#categorySearchForm").ajaxForm({datatype:n.getAjaxDataType(),success:t,complete:function(){n.EventListContainer.data("targetFormId","categorySearchForm")}});$("#themeSearchForm").ajaxForm({datatype:n.getAjaxDataType(),success:t,complete:function(){n.EventListContainer.data("targetFormId","themeSearchForm")}});$("#perkSearchForm").ajaxForm({datatype:n.getAjaxDataType(),success:t,complete:function(){n.EventListContainer.data("targetFormId","themeSearchForm")}});$("#recommendationSearchForm").ajaxForm({datatype:n.getAjaxDataType(),success:t,complete:function(){n.EventListContainer.data("targetFormId","recommendationSearchForm")}});$("#loadEventIndex").ajaxForm({datatype:n.getAjaxDataType(),success:t,complete:function(){n.EventListContainer.data("targetFormId","loadEventIndex")}});$("#calendarWidgetForm").ajaxForm({datatype:n.getAjaxDataType(),success:t,complete:function(){n.EventListContainer.data("targetFormId","calendarWidgetForm")}});$("#calendarWidgetForm").ajaxForm({datatype:n.getAjaxDataType(),success:t,complete:function(){n.EventListContainer.data("targetFormId","calendarWidgetForm")}});$("#calendarWidgetForm").ajaxForm({datatype:n.getAjaxDataType(),success:t,complete:function(){n.EventListContainer.data("targetFormId","calendarWidgetForm")}});$("#SearchSubmit").on("click",function(t){t.preventDefault();t.stopPropagation();var i=$("#searchForm");i.find('input[name="view"]').val($("#view").val());n.AddRemoveMonthLimits(i);i.submit();SVG.Weekpicker.Reset()});$("#recommendedSection #recommended-events-button").on("click",function(t){t.preventDefault();t.stopPropagation();var i=$("#recommendationSearchForm");i.find('input[name="view"]').val($("#view").val());n.AddRemoveMonthLimits(i);i.submit();$("#SearchValue").val("");SVG.Weekpicker.Reset()});$("#categoryList li a").on("click",function(t){t.preventDefault();t.stopPropagation();var i=$("#categorySearchForm");i.find('input[name="EventCategoryId"]').val($(this).data("id"));i.find('input[name="SearchValue"]').val($(this).data("searchvalue"));i.find('input[name="view"]').val($("#view").val());n.AddRemoveMonthLimits(i);i.submit();$("#SearchValue").val("");SVG.Weekpicker.Reset()});$("#themeList li a").on("click",function(t){t.preventDefault();t.stopPropagation();var i=$("#themeSearchForm");i.find('input[name="SearchValue"]').val($(this).data("searchvalue"));i.find('input[name="EventTheme"]').val($(this).data("searchvalue"));i.find('input[name="view"]').val($("#view").val());n.AddRemoveMonthLimits(i);i.submit();$("#SearchValue").val("");SVG.Weekpicker.Reset()});$("#perkList li a").on("click",function(t){t.preventDefault();t.stopPropagation();var i=$("#perkSearchForm");i.find('input[name="SearchValue"]').val($(this).data("searchvalue"));i.find('input[name="EventPerk"]').val($(this).data("searchvalue"));i.find('input[name="view"]').val($("#view").val());n.AddRemoveMonthLimits(i);i.submit();$("#SearchValue").val("");SVG.Weekpicker.Reset()});n.EventListContainer.on("click",".clearFilter",function(){var i=new Date,t=$("#loadEventIndex");t.find('input[name="CurrentMonth"]').val(i.getMonth()-1);t.find('input[name="CurrentYear"]').val(i.getFullYear());t.find('input[name="view"]').val($("#view").val());n.AddRemoveMonthLimits(t);t.submit();$("#SearchValue").val("");SVG.Weekpicker.Reset()});SVG.Weekpicker.Init()}
